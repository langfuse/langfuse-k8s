# This values.yaml file demonstrates how to configure SSO/OAuth providers
# with secret references for sensitive configuration values like client ID and client secret.
# This approach keeps sensitive data in Kubernetes secrets rather than in values files.

langfuse:
  encryptionKey:
    secretKeyRef:
      name: langfuse-secrets
      key: encryption-key

  salt:
    secretKeyRef:
      name: langfuse-secrets
      key: salt

  nextauth:
    url: "https://langfuse.example.com"
    secret:
      secretKeyRef:
        name: langfuse-secrets
        key: nextauth-secret

  # Authentication configuration with SSO providers
  auth:
    # Disable local username/password authentication when using SSO
    disableUsernamePassword: true
    
    # Configure SSO providers
    # For sensitive fields like clientSecret, use secretKeyRef to reference Kubernetes secrets
    providers:
      # Example: Azure AD configuration
      azureAd:
        # Client ID can be specified directly as it's typically not sensitive
        clientId: "your-azure-client-id"
        # Client Secret should come from a secret
        clientSecret:
          secretKeyRef:
            name: "sso-credentials"
            key: "azure-client-secret"
        # Tenant ID can be specified directly
        tenantId: "your-azure-tenant-id"
      
      # Example: GitHub OAuth
      github:
        # Direct values for non-sensitive configuration
        clientId: "your-github-client-id"
        # Sensitive values from secrets
        clientSecret:
          secretKeyRef:
            name: "sso-credentials"
            key: "github-client-secret"
      
      # Example: Google OAuth
      google:
        clientId: "your-google-client-id"
        clientSecret:
          secretKeyRef:
            name: "sso-credentials"
            key: "google-client-secret"
      
      # Example: Okta
      okta:
        clientId:
          secretKeyRef:
            name: "sso-credentials"
            key: "okta-client-id"
        clientSecret:
          secretKeyRef:
            name: "sso-credentials"
            key: "okta-client-secret"
        domain: "https://your-okta-domain.okta.com"

postgresql:
  auth:
    existingSecret: langfuse-secrets
    secretKeys:
      userPasswordKey: postgresql-password

clickhouse:
  auth:
    existingSecret: langfuse-secrets
    existingSecretKey: clickhouse-password

redis:
  auth:
    existingSecret: langfuse-secrets
    existingSecretPasswordKey: redis-password

s3:
  auth:
    existingSecret: langfuse-secrets
    rootUserSecretKey: s3-user
    rootPasswordSecretKey: s3-password
